/*! For license information please see ovenplayer.provider.DashProvider-0.9.750.js.LICENSE */
(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{135:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,r){var n=t?1e3:1024;if(Math.abs(e)<n)return e+" B";var o=r||"B",a=["k"+o,"M"+o,"G"+o,"T"+o,"P"+o,"E"+o,"Z"+o,"Y"+o],i=-1;do{e/=n,++i}while(Math.abs(e)>=n&&i<a.length-1);return e.toFixed(1)+a[i]}},307:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(313)),o=s(r(314)),a=s(r(66)),i=s(r(308)),u=r(303),l=r(1);function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,r){OvenPlayerConsole.log("[Provider] loaded. ");var s={};(0,a.default)(s);var c=e.element,d=null,g=null,E=!1;e.adTagUrl&&(OvenPlayerConsole.log("[Provider] Ad Client - ",t.getAdClient()),(d=t.getAdClient()===l.AD_CLIENT_VAST?(0,o.default)(c,s,t,e.adTagUrl):(0,n.default)(c,s,t,e.adTagUrl))||console.log("Can not load due to google ima for Ads.")),g=(0,i.default)(c,s,d?d.videoEndedCallback:null),c.playbackRate=c.defaultPlaybackRate=t.getPlaybackRate();var f=function(n){var o=e.sources[e.currentSource];if(e.framerate=o.framerate,s.setVolume(t.getVolume()),e.framerate||t.setTimecodeMode(!0),r)r(o,n);else{OvenPlayerConsole.log("source loaded : ",o,"lastPlayPosition : "+n);var a=c.src;o.file!==a?(c.src=o.file,(a||""===a)&&c.load()):0===n&&c.currentTime>0&&s.seek(n),n>0&&(t.isAutoStart()||s.play()),t.isAutoStart()&&s.play()}};return s.getName=function(){return e.name},s.canSeek=function(){return e.canSeek},s.setCanSeek=function(t){e.canSeek=t},s.isSeeking=function(){return e.seeking},s.setSeeking=function(t){e.seeking=t},s.setMetaLoaded=function(){e.isLoaded=!0},s.metaLoaded=function(){return e.isLoaded},s.setState=function(t){if(e.state!==t){var r=e.state;if(OvenPlayerConsole.log("Provider : setState()",t),r===l.STATE_AD_PLAYING&&(t===l.STATE_ERROR||t===l.STATE_IDLE))return!1;switch(OvenPlayerConsole.log("Provider : triggerSatatus",t),t){case l.STATE_COMPLETE:s.trigger(l.PLAYER_COMPLETE);break;case l.STATE_PAUSED:s.trigger(l.PLAYER_PAUSE,{prevState:e.state,newstate:l.STATE_PAUSED});break;case l.STATE_AD_PAUSED:s.trigger(l.PLAYER_PAUSE,{prevState:e.state,newstate:l.STATE_AD_PAUSED});break;case l.STATE_PLAYING:s.trigger(l.PLAYER_PLAY,{prevState:e.state,newstate:l.STATE_PLAYING});case l.STATE_AD_PLAYING:s.trigger(l.PLAYER_PLAY,{prevState:e.state,newstate:l.STATE_AD_PLAYING})}e.state=t,s.trigger(l.PLAYER_STATE,{prevstate:r,newstate:e.state})}},s.getState=function(){return e.state},s.setBuffer=function(t){e.buffer=t},s.getBuffer=function(){return e.buffer},s.isLive=function(){return!!e.isLive||c.duration===1/0},s.getDuration=function(){return s.isLive()?1/0:c.duration},s.getPosition=function(){return c?c.currentTime:0},s.setVolume=function(e){if(!c)return!1;c.volume=e/100},s.getVolume=function(){return c?100*c.volume:0},s.setMute=function(e){return!!c&&(void 0===e?(c.muted=!c.muted,s.trigger(l.CONTENT_MUTE,{mute:c.muted})):(c.muted=e,s.trigger(l.CONTENT_MUTE,{mute:c.muted})),c.muted)},s.getMute=function(){return!!c&&c.muted},s.preload=function(r,n){return e.sources=r,e.currentSource=(0,u.pickCurrentSource)(r,e.currentSource,t),f(n||0),new Promise(function(e,r){t.isMute()&&s.setMute(!0),t.getVolume()&&s.setVolume(t.getVolume()),e()})},s.load=function(r){e.sources=r,e.currentSource=(0,u.pickCurrentSource)(r,e.currentSource,t),f(e.sources.starttime||0)},s.play=function(){if(OvenPlayerConsole.log("Provider : play()"),!c)return!1;if(E)return!1;if(E=!0,s.getState()!==l.STATE_PLAYING)if(d&&d.isActive()||d&&!d.started())d.play().then(function(e){E=!1,OvenPlayerConsole.log("Provider : ads play success")}).catch(function(e){E=!1,OvenPlayerConsole.log("Provider : ads play fail",e)});else{var e=c.play();void 0!==e?e.then(function(){E=!1,OvenPlayerConsole.log("Provider : video play success")}).catch(function(e){OvenPlayerConsole.log("Provider : video play error",e.message),E=!1}):(OvenPlayerConsole.log("Provider : video play success (ie)"),E=!1)}},s.pause=function(){if(OvenPlayerConsole.log("Provider : pause()"),!c)return!1;s.getState()===l.STATE_PLAYING?c.pause():s.getState()===l.STATE_AD_PLAYING&&d.pause()},s.seek=function(e){if(!c)return!1;c.currentTime=e},s.setPlaybackRate=function(e){return!!c&&(s.trigger(l.PLAYBACK_RATE_CHANGED,{playbackRate:e}),c.playbackRate=c.defaultPlaybackRate=e)},s.getPlaybackRate=function(){return c?c.playbackRate:0},s.getSources=function(){return c?e.sources.map(function(e,t){var r={file:e.file,type:e.type,label:e.label,index:t};return e.lowLatency&&(r.lowLatency=e.lowLatency),r}):[]},s.getCurrentSource=function(){return e.currentSource},s.setCurrentSource=function(r,n){if(r>-1&&e.sources&&e.sources.length>r)return OvenPlayerConsole.log("source changed : "+r),e.currentSource=r,s.trigger(l.CONTENT_SOURCE_CHANGED,{currentSource:r}),t.setSourceIndex(r),s.setState(l.STATE_IDLE),n&&f(c.currentTime||0),e.currentSource},s.getQualityLevels=function(){return c?e.qualityLevels:[]},s.getCurrentQuality=function(){return c?e.currentQuality:null},s.setCurrentQuality=function(e){},s.isAutoQuality=function(){},s.setAutoQuality=function(e){},s.getFramerate=function(){return e.framerate},s.setFramerate=function(t){return e.framerate=t},s.seekFrame=function(t){var r=e.framerate,n=(c.currentTime*r+t)/r;n+=1e-5,s.pause(),s.seek(n)},s.stop=function(){if(!c)return!1;for(OvenPlayerConsole.log("CORE : stop() "),c.removeAttribute("preload"),c.removeAttribute("src");c.firstChild;)c.removeChild(c.firstChild);s.pause(),s.setState(l.STATE_IDLE)},s.destroy=function(){if(!c)return!1;s.stop(),g.destroy(),d&&(d.destroy(),d=null),s.off(),OvenPlayerConsole.log("CORE : destroy() player stop, listener, event destroied")},s.super=function(e){var t=s[e];return function(){return t.apply(s,arguments)}},s}},308:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(303);t.default=function(e,t,r){var a={};OvenPlayerConsole.log("EventListener loaded.",e,t);var i={},u=-1,l=e;return a.canplay=function(){t.setCanSeek(!0),t.trigger(n.CONTENT_BUFFER_FULL),OvenPlayerConsole.log("EventListener : on canplay")},a.durationchange=function(){a.progress(),OvenPlayerConsole.log("EventListener : on durationchange")},a.ended=function(){OvenPlayerConsole.log("EventListener : on ended"),t.getState()!==n.STATE_IDLE&&t.getState()!==n.STATE_COMPLETE&&(r?r(function(){t.setState(n.STATE_COMPLETE)}):t.setState(n.STATE_COMPLETE))},a.loadeddata=function(){},a.loadedmetadata=function(){var e=t.getSources(),r=t.getCurrentSource(),o=r>-1?e[r].type:"",a={duration:t.isLive()?1/0:l.duration,type:o};t.setMetaLoaded(),OvenPlayerConsole.log("EventListener : on loadedmetadata",a),t.trigger(n.CONTENT_META,a)},a.pause=function(){return t.getState()!==n.STATE_COMPLETE&&t.getState()!==n.STATE_ERROR&&!l.ended&&!l.error&&l.currentTime!==l.duration&&(OvenPlayerConsole.log("EventListener : on pause"),void t.setState(n.STATE_PAUSED))},a.play=function(){u=-1,l.paused||t.getState()===n.STATE_PLAYING||t.setState(n.STATE_LOADING)},a.playing=function(){OvenPlayerConsole.log("EventListener : on playing"),u<0&&t.setState(n.STATE_PLAYING)},a.progress=function(){var e=l.buffered;if(!e)return!1;var r=l.duration,o=l.currentTime,a=function(e,t,r){return Math.max(Math.min(e,r),t)}((e.length>0?e.end(e.length-1):0)/r,0,1);t.setBuffer(100*a),t.trigger(n.CONTENT_BUFFER,{bufferPercent:100*a,position:o,duration:r}),OvenPlayerConsole.log("EventListener : on progress",100*a)},a.timeupdate=function(){var e=l.currentTime,r=l.duration;isNaN(r)||(r>9e15&&(r=1/0),t.isSeeking()||l.paused||t.getState()!==n.STATE_STALLED&&t.getState()!==n.STATE_LOADING&&t.getState()!==n.STATE_AD_PLAYING||function(e,t){return e.toFixed(2)===t.toFixed(2)}(u,e)||(u=-1,t.setState(n.STATE_PLAYING)),(t.getState()===n.STATE_PLAYING||t.isSeeking())&&t.trigger(n.CONTENT_TIME,{position:e,duration:r}))},a.seeking=function(){t.setSeeking(!0),OvenPlayerConsole.log("EventListener : on seeking",l.currentTime),t.trigger(n.CONTENT_SEEK,{position:l.currentTime})},a.seeked=function(){t.isSeeking()&&(OvenPlayerConsole.log("EventListener : on seeked"),t.setSeeking(!1),t.trigger(n.CONTENT_SEEKED))},a.stalled=function(){OvenPlayerConsole.log("EventListener : on stalled")},a.waiting=function(){OvenPlayerConsole.log("EventListener : on waiting",t.getState()),t.isSeeking()?t.setState(n.STATE_LOADING):t.getState()===n.STATE_PLAYING&&(u=l.currentTime,t.setState(n.STATE_STALLED))},a.volumechange=function(){OvenPlayerConsole.log("EventListener : on volumechange",Math.round(100*l.volume)),t.trigger(n.CONTENT_VOLUME,{volume:Math.round(100*l.volume),mute:l.muted})},a.error=function(){var e=l.error&&l.error.code||0,r={0:n.PLAYER_UNKNWON_ERROR,1:n.PLAYER_UNKNWON_OPERATION_ERROR,2:n.PLAYER_UNKNWON_NEWWORK_ERROR,3:n.PLAYER_UNKNWON_DECODE_ERROR,4:n.PLAYER_FILE_ERROR}[e]||0;OvenPlayerConsole.log("EventListener : on error",r),(0,o.errorTrigger)(n.ERRORS.codes[r],t)},Object.keys(a).forEach(function(e){l.removeEventListener(e,a[e]),l.addEventListener(e,a[e])}),i.destroy=function(){OvenPlayerConsole.log("EventListener : destroy()"),Object.keys(a).forEach(function(e){l.removeEventListener(e,a[e])})},i}},74:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r(307)),o=r(303),a=l(r(135)),i=r(1),u=l(r(8));function l(e){return e&&e.__esModule?e:{default:e}}var s="download",c="manifestError";t.default=function(e,t,r){var l={},d=null,g=null,E=null,f=0,T=!1,v=!1,A="";try{var y=function(e){dashjs.Version>"2.9.0"?d.setAutoSwitchQualityFor("video",e):d.setAutoSwitchQualityFor(e)},S=function(){return dashjs.Version>"2.9.0"?d.getAutoSwitchQualityFor("video"):d.getAutoSwitchQualityFor()};if(d=dashjs.MediaPlayer().create(),window.op_dash=d,dashjs.Version<"2.6.5")throw i.ERRORS.codes[i.INIT_DASH_UNSUPPORT];d.getDebug().setLogToBrowserConsole(!1),d.initialize(e,null,!1);var P={name:i.PROVIDER_DASH,element:e,mse:d,listener:null,isLoaded:!1,canSeek:!1,isLive:!1,seeking:!1,state:i.STATE_IDLE,buffer:0,framerate:0,currentQuality:-1,currentSource:-1,qualityLevels:[],sources:[],adTagUrl:r};l=(0,n.default)(P,t,function(e,r){OvenPlayerConsole.log("DASH : Attach File : ",e,"lastPlayPosition : "+r),y(!0),A=e.file,e.lowLatency&&(d.setLowLatencyEnabled(e.lowLatency),t.getConfig().lowLatencyMpdLiveDelay&&"number"==typeof t.getConfig().lowLatencyMpdLiveDelay&&d.setLiveDelay(t.getConfig().lowLatencyMpdLiveDelay)),d.attachSource(A),f=r}),g=l.super("play"),E=l.super("destroy"),OvenPlayerConsole.log("DASH PROVIDER LOADED."),d.on(dashjs.MediaPlayer.events.ERROR,function(e){if(e&&(e.error===s||e.error===c)){var t=i.ERRORS.codes[i.PLAYER_UNKNWON_NEWWORK_ERROR];t.error=e,(0,o.errorTrigger)(t,l)}}),d.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_REQUESTED,function(e){e&&e.mediaType&&"video"===e.mediaType&&l.trigger(i.CONTENT_LEVEL_CHANGED,{isAuto:S(),currentQuality:P.currentQuality,type:"request"})}),d.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_RENDERED,function(e){e&&e.mediaType&&"video"===e.mediaType&&(P.currentQuality=e.newQuality,l.trigger(i.CONTENT_LEVEL_CHANGED,{isAuto:S(),currentQuality:e.newQuality,type:"render"}))}),d.on(dashjs.MediaPlayer.events.PLAYBACK_METADATA_LOADED,function(e){OvenPlayerConsole.log("DASH : PLAYBACK_METADATA_LOADED  : ",d.getQualityFor("video"),d.getBitrateInfoListFor("video"),d.getBitrateInfoListFor("video")[d.getQualityFor("video")]),T=!0;var r=d.getBitrateInfoListFor("video");P.currentQuality=d.getQualityFor("video");for(var n=0;n<r.length;n++)u.default.findWhere(P.qualityLevels,{bitrate:r[n].bitrate,height:r[n].height,width:r[n].width})||P.qualityLevels.push({bitrate:r[n].bitrate,height:r[n].height,width:r[n].width,index:r[n].qualityIndex,label:r[n].width+"x"+r[n].height+", "+(0,a.default)(r[n].bitrate,!0,"bps")});f&&(d.seek(f),t.isAutoStart()||l.play()),d.isDynamic()&&(P.isLive=!0),t.isAutoStart()&&!v&&(OvenPlayerConsole.log("DASH : AUTOPLAY()!"),l.play(),v=!0)}),l.play=function(t){var r=0;l.getState()===i.STATE_AD_PLAYING||l.getState()===i.STATE_AD_PAUSED||(T=!1,d.attachView(e)),function e(){r++,T?g(t):r<300?setTimeout(e,100):l.play()}()},l.setCurrentQuality=function(e){return l.getState()!==i.STATE_PLAYING&&l.play(),P.currentQuality=e,S()&&y(!1),d.setQualityFor("video",e),P.currentQuality},l.isAutoQuality=function(){return S()},l.setAutoQuality=function(e){y(e)},l.destroy=function(){d.reset(),OvenPlayerConsole.log("DASH : PROVIDER DESTROYED."),E()}}catch(e){if(e&&e.code&&e.code===i.INIT_DASH_UNSUPPORT)throw e;var L=i.ERRORS.codes[i.INIT_DASH_NOTFOUND];throw L.error=e,L}return l}}}]);